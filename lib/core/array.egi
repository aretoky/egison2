;;
;; Array.egi
;;

(define $Array
  (lambda [$a]
    (type
      {[$var-match (lambda [$tgt] {tgt})]
       [$inductive-match
        (destructor
          {[<cons ,$key _ _> [a (Array a)]
            {[$arr (if (array-range? key arr)
                       {[(array-ref key arr) arr]}
                       {})]}]})]})))

